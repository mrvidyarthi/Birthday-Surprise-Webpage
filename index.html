<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Happy Birthday ‚Äî A Surprise</title>
<style>
  :root {
    --bg: #0f1724;
    --card: #0b1220;
    --accent: #ff6b81;
    --muted: #9aa4b2;
  }
  * { box-sizing: border-box; }
  html, body {
    height: 100%;
    margin: 0;
    font-family: Inter, system-ui, Segoe UI, Roboto, 'Helvetica Neue', Arial;
  }
  body {
    background: linear-gradient(180deg,#071026 0%, #0b1220 60%);
    color: #e8f0ff;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px;
  }

  .wrap {
    width: 100%;
    max-width: 900px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius: 16px;
    padding: 16px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.6);
    position: relative;
    overflow: hidden;
  }

  /* Start popup */
  .start-popup {
    position: fixed;
    inset: 0;
    background: rgba(2,6,23,0.92);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    text-align: center;
    padding: 20px;
  }
  .start-popup h1 {
    font-size: clamp(18px, 4vw, 24px);
    margin-bottom: 14px;
    line-height: 1.25;
  }
  .start-popup button {
    background: linear-gradient(90deg,var(--accent),#ff9aa2);
    border: none;
    padding: 12px 20px;
    border-radius: 10px;
    color: #081223;
    font-weight: 700;
    cursor: pointer;
    font-size: 16px;
  }

  /* Loader */
  .loader {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(2,6,23,0.85);
    z-index: 20;
    transition: opacity .5s ease;
  }
  .loader.hidden { opacity: 0; pointer-events: none; }
  .loader h2 { font-size: clamp(16px, 3vw, 20px); letter-spacing: 0.4px; }

  /* Slideshow */
  .slideshow {
    height: clamp(200px, 40vw, 320px);
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    background: #000;
  }
  .slide {
    position: absolute;
    inset: 0;
    opacity: 0;
    transition: opacity .9s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .slide.show { opacity: 1; z-index: 2; }
  .slide img, .slide video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(2,6,23,0.15), rgba(2,6,23,0.6));
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 12px;
    z-index: 3;
  }
  .headline {
    font-size: clamp(18px, 5vw, 28px);
    margin: 0 0 6px 0;
  }
  .sub {
    color: var(--muted);
    margin: 0;
    font-size: clamp(12px, 3.5vw, 14px);
  }

  /* Message card */
  .card {
    display: flex;
    gap: 12px;
    padding: 12px;
    background: rgba(255,255,255,0.02);
    border-radius: 12px;
    margin-top: 14px;
    align-items: center;
    flex-wrap: wrap;
  }
  .left { width: 90px; text-align: center; flex-shrink: 0; }
  .avatar {
    width: 80px;
    height: 80px;
    border-radius: 12px;
    background: #fff2;
    display: inline-block;
    object-fit: cover;
  }
  .right { flex: 1; min-width: 180px; }
  .typed { font-weight: 600; font-size: clamp(14px, 4vw, 18px); }
  .desc { color: var(--muted); margin-top: 6px; font-size: clamp(12px, 3.5vw, 14px); }

  /* Buttons */
  .controls { display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap; }
  .btn {
    background: linear-gradient(90deg,var(--accent),#ff9aa2);
    border: none;
    padding: 10px 14px;
    border-radius: 10px;
    color: #081223;
    font-weight: 700;
    cursor: pointer;
    font-size: 14px;
  }
  .btn.ghost {
    background: transparent;
    color: var(--muted);
    border: 1px solid rgba(255,255,255,0.04);
  }

  /* Cake area */
  .cake-area {
    margin-top: 14px;
    background: rgba(255,255,255,0.015);
    padding: 14px;
    border-radius: 12px;
    text-align: center;
  }
  .cake {
    width: 140px;
    height: 140px;
    margin: 0 auto;
    display: block;
    transition: transform .2s ease;
    max-width: 100%;
  }
  .secret { margin-top: 12px; display: none; }

  /* Heart button */
  .heart {
    position: absolute;
    right: 12px;
    top: 12px;
    background: linear-gradient(90deg,#ff9aa2,#ff6b81);
    width: 42px;
    height: 42px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 40;
    color: #081223;
    font-weight: 800;
  }

  /* Footer note */
  .note {
    color: var(--muted);
    font-size: clamp(11px, 3vw, 13px);
    margin-top: 12px;
  }

  /* Confetti canvas */
  canvas.confetti {
    position: absolute;
    left: 0;
    top: 0;
    pointer-events: none;
    width: 100%;
    height: 100%;
    z-index: 30;
  }
</style>
</head>
<body>
<div class="start-popup" id="startPopup">
  <h1>üéÅ Are Pagal! Pehle niche click karo ‚Äî phir surprise dekho üòÇüéâ</h1>
  <button id="startBtn">Start Surprise</button>
</div>

<div class="wrap" style="display:none" id="mainContent">
  <div class="loader" id="loader"><h2>Loading something special just for you‚Ä¶</h2></div>
  <div class="heart" id="heartBtn" title="Open a special secret">‚ù§</div>

  <div class="slideshow" id="slideshow">
    <div class="slide show"><img src="img1.jpg" alt="slide image 1"></div>
    <div class="slide"><img src="img2.jpg" alt="slide image 2"></div>
    <div class="slide"><video src="video1.mp4" muted playsinline loop></video></div>
    <div class="slide"><video src="video2.mp4" muted playsinline loop></video></div>
    <div class="slide"><img src="img3.jpg" alt="slide image 3"></div>
    <div class="slide"><video src="video3.mp4" muted playsinline loop></video></div>
    <div class="slide"><video src="video4.mp4" muted playsinline loop></video></div>
    <div class="slide"><img src="img4.jpg" alt="slide image 4"></div>
    <div class="overlay">
      <div>
        <h1 class="headline">Happy Birthday ‚Äî <span id="friendName">Pagalü§™</span> üéâ</h1>
        <p class="sub">Press the cake when ready ‚Äî I made it just for you.</p>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="left">
      <img src="img1.jpg" alt="avatar" class="avatar" id="avatar">
    </div>
    <div class="right">
      <div class="typed" id="typed">Hey! This is for you ‚Äî</div>
      <div class="desc" id="desc">Click the <strong>Cut Cake</strong> button below, and don't forget to press the heart for a tiny secret ü•∞</div>
      <div class="controls">
        <button class="btn" id="cakeBtn">Cut Cake üéÇ</button>
        <button class="btn ghost" id="musicBtn">Play Song ‚ñ∂Ô∏è</button>
      </div>
    </div>
  </div>

  <div class="cake-area">
    <img src="cake.png" alt="cake" class="cake" id="cakeImg">
    <div class="secret" id="secretMsg">
      <h3 style="margin:6px 0 2px 0">Surprise! üéà</h3>
      <p style="color:var(--muted);margin:0" id="secretText">I hope this small surprise made you smile. You're the best, Kajal ‚ù§Ô∏è</p>
    </div>
  </div>

  <p class="note">Tip: Agar audio autoplay na ho to "Play Song" dabayein.</p>
  <audio id="bgAudio" preload="auto">
    <source src="audio.mp3" type="audio/mpeg">
  </audio>
  <canvas class="confetti" id="confettiCanvas"></canvas>
</div>

<script>
// same JS from your original code ‚Äî ‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§® remove ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ, ‡§¨‡§∏ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è safe ‡§∞‡§ñ‡§æ
const FRIEND_NAME = 'Kajal';
document.getElementById('friendName').textContent = FRIEND_NAME;

const typedEl = document.getElementById('typed');
const phrases = [
  `Happy Birthday, ${FRIEND_NAME} üéâ`,
  'You make life fun and brighter.',
  'This little surprise is from me to you.'
];
let ti = 0, pi = 0;
function typeLoop(){
  const txt = phrases[pi];
  if(ti <= txt.length){
    typedEl.textContent = txt.slice(0,ti);
    ti++;
    setTimeout(typeLoop, 70);
  } else {
    setTimeout(()=>{ti=0; pi=(pi+1)%phrases.length; typeLoop()}, 1200);
  }
}

const slides = Array.from(document.querySelectorAll('.slide'));
let sIndex = 0;
let slideInterval = null;
const SLIDE_MS = 4500;

function showSlide(newIndex){
  newIndex = (newIndex + slides.length) % slides.length;
  slides[sIndex].classList.remove('show');
  const oldVid = slides[sIndex].querySelector('video');
  if(oldVid && !oldVid.paused) {
    try { oldVid.pause(); oldVid.currentTime = 0; } catch(e){}
  }
  slides[newIndex].classList.add('show');
  const newVid = slides[newIndex].querySelector('video');
  if(newVid){
    newVid.muted = true;
    newVid.loop = true;
    newVid.play().catch(()=>{});
  }
  sIndex = newIndex;
}
function nextSlide(){ showSlide(sIndex + 1); }
function startSlideshow(){
  showSlide(sIndex);
  slideInterval = setInterval(nextSlide, SLIDE_MS);
}

const audio = document.getElementById('bgAudio');
document.getElementById('musicBtn').addEventListener('click', ()=>{
  if(audio.paused){
    audio.play().catch(()=>alert('Please tap anywhere to allow audio üéµ'));
  } else audio.pause();
});

let confettiInterval;
document.getElementById('cakeBtn').addEventListener('click', async ()=>{
  document.getElementById('secretMsg').style.display = 'block';
  if(confettiInterval) clearInterval(confettiInterval);
  launchConfetti();
  confettiInterval = setInterval(()=>launchConfetti(), 4000);
  const cakeImg = document.getElementById('cakeImg');
  cakeImg.style.transform = 'scale(.95) rotate(-6deg)';
  setTimeout(()=>cakeImg.style.transform='scale(1) rotate(0deg)',600);
  try { await audio.play(); } catch(e){}
});

document.getElementById('heartBtn').addEventListener('click', ()=>{
  const more = prompt(`A secret for ${FRIEND_NAME}: Write a short sentence you'd like them to see (keep it sweet):`, `You are amazing and I'm lucky to have you ‚ù§Ô∏è`);
  if(more){
    document.getElementById('secretText').textContent = more;
    document.getElementById('secretMsg').style.display = 'block';
    launchConfetti(80);
  }
});

function setupCanvasSize(canvas){
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  canvas.width = Math.round(rect.width * dpr);
  canvas.height = Math.round(rect.height * dpr);
  canvas.style.width = rect.width + 'px';
  canvas.style.height = rect.height + 'px';
  return {W: canvas.width, H: canvas.height, dpr};
}
function launchConfetti(pieces=120){
  const canvas = document.getElementById('confettiCanvas');
  const ctx = canvas.getContext('2d');
  const {W,H,dpr} = setupCanvasSize(canvas);
  const items = [];
  for(let i=0;i<pieces;i++){
    items.push({
      x: Math.random()*W,
      y: Math.random()*-H,
      r: (Math.random()*8+4)*dpr,
      d: Math.random()*Math.PI*2,
      vx: (Math.random()-0.5)*6*dpr,
      vy: Math.random()*3*dpr+2*dpr,
      color: randomColor()
    });
  }
  function loop(){
    ctx.clearRect(0,0,W,H);
    for(let it of items){
      it.x += it.vx;
      it.y += it.vy;
      it.d += 0.1;
      ctx.save();
      ctx.translate(it.x, it.y);
      ctx.rotate(it.d);
      ctx.fillStyle = it.color;
      ctx.fillRect(-it.r/2, -it.r/2, it.r, it.r*0.6);
      ctx.restore();
      if(it.y > H + 40) it.y = -10 - Math.random()*50;
      if(it.x > W + 40) it.x = -10;
      if(it.x < -40) it.x = W + 10;
    }
    requestAnimationFrame(loop);
  }
  loop();
}
function randomColor(){
  const cols = ['#ff6b81','#ffd166','#6be3ff','#b28bff','#9ee493'];
  return cols[Math.floor(Math.random()*cols.length)];
}
window.addEventListener('resize', ()=> setupCanvasSize(document.getElementById('confettiCanvas')));
document.getElementById('startBtn').addEventListener('click', ()=>{
  document.getElementById('startPopup').style.display = 'none';
  document.getElementById('mainContent').style.display = 'block';
  setTimeout(()=>document.getElementById('loader').classList.add('hidden'),800);
  typeLoop();
  setTimeout(()=>startSlideshow(), 600);
  setupCanvasSize(document.getElementById('confettiCanvas'));
});
document.addEventListener('DOMContentLoaded', ()=>{
  slides.forEach((sl)=>{
    const v = sl.querySelector('video');
    if(v){
      v.pause();
      v.muted = true;
      v.playsInline = true;
      v.loop = true;
    }
  });
});
document.getElementById('slideshow').addEventListener('click', (e)=>{
  const rect = e.currentTarget.getBoundingClientRect();
  const x = e.clientX - rect.left;
  if(x < rect.width * 0.4) showSlide(sIndex - 1);
  else if(x > rect.width * 0.6) showSlide(sIndex + 1);
});
</script>
</body>
</html>
